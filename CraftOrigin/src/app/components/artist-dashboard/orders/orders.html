<div class="space-y-6">
  <!-- Enhanced Header with gradient -->
  <div class="relative bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-8 text-slate-900 shadow-lg overflow-hidden border border-indigo-100">
    <div class="absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -mr-32 -mt-32"></div>
    <div class="absolute bottom-0 left-0 w-48 h-48 bg-white opacity-5 rounded-full -ml-24 -mb-24"></div>
    <div class="relative z-10">
      <div class="flex items-center justify-between">
        <div>
          <h2 class="text-4xl font-bold mb-2 flex items-center">
            <i class="fa-solid fa-shopping-bag text-5xl mr-4 text-indigo-600"></i>
            Order Management
          </h2>
          <p class="text-slate-600 text-lg">Track and manage all customer orders</p>
        </div>
        <div class="w-56">
          <select 
            [(ngModel)]="filterStatus" 
            (change)="onFilterChange()"
            class="w-full px-4 py-3 border border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white transition-colors font-medium text-gray-900"
          >
            <option value="all">All Orders</option>
            <option value="PLACED">Placed</option>
            <option value="PROCESSING">Processing</option>
            <option value="SHIPPED">Shipped</option>
            <option value="DELIVERED">Delivered</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="flex justify-center py-12">
    <div class="text-center">
      <div class="animate-spin inline-block h-12 w-12 border-b-2 border-indigo-500 mx-auto mb-3"></div>
      <p class="text-gray-600">Loading orders...</p>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && orders.length === 0" class="text-center py-16 bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl border border-dashed border-indigo-200">
    <div class="bg-gradient-to-br from-indigo-100 to-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm">
      <i class="fa-solid fa-shopping-bag text-4xl text-indigo-600"></i>
    </div>
    <h3 class="text-xl font-bold text-gray-900 mb-2">No orders yet</h3>
    <p class="text-gray-600">When customers purchase your artworks, orders will appear here.</p>
  </div>

  <!-- Orders List -->
  <div *ngIf="!isLoading && orders.length > 0" class="space-y-4">
    <div *ngFor="let order of orders" class="bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100 overflow-hidden">
      <!-- Order Header -->
      <div class="bg-gradient-to-r from-indigo-50 to-blue-50 px-6 py-5 flex flex-wrap items-center justify-between gap-4 border-b border-indigo-100">
        <div class="flex items-center space-x-6">
          <div class="flex items-center space-x-2">
            <i class="fa-solid fa-calendar text-sm text-indigo-600"></i>
            <div>
              <p class="text-xs text-gray-500 uppercase font-semibold">Order Placed</p>
              <p class="text-sm font-bold text-gray-900">{{ order.created_at | date:'MMM d, yyyy' }}</p>
            </div>
          </div>
          <div class="w-px h-8 bg-gray-200"></div>
          <div class="flex items-center space-x-2">
            <i class="fa-solid fa-hashtag text-indigo-600"></i>
            <div>
              <p class="text-xs text-gray-500 uppercase font-semibold">Order ID</p>
              <p class="text-sm font-bold text-indigo-700">#{{ order.id.substring(0, 8).toUpperCase() }}</p>
            </div>
          </div>
          <div class="w-px h-8 bg-gray-200"></div>
          <div class="flex items-center space-x-2">
            <i class="fa-solid fa-user text-indigo-600"></i>
            <div>
              <p class="text-xs text-gray-500 uppercase font-semibold">Buyer</p>
              <p class="text-sm font-bold text-gray-900">{{ order.buyer_name }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Items -->
      <div class="divide-y divide-gray-100">
        <div *ngFor="let item of order.items" class="p-6 hover:bg-indigo-50/30 transition-colors flex items-center gap-6">
          <!-- Image -->
          <div class="h-24 w-24 rounded-lg bg-gradient-to-br from-indigo-100 to-blue-100 overflow-hidden flex-shrink-0 shadow-sm hover:shadow-md transition-shadow">
             <img *ngIf="item.image_url" [src]="getImageUrl(item.image_url)" [alt]="item.title" class="w-full h-full object-cover">
             <div *ngIf="!item.image_url" class="w-full h-full flex items-center justify-center text-indigo-300">
               <i class="fa-solid fa-image text-2xl"></i>
             </div>
          </div>

          <!-- Details -->
          <div class="flex-1">
            <h4 class="font-bold text-gray-900 text-lg mb-1">{{ item.title }}</h4>
            <div class="flex items-center gap-4 text-sm text-gray-600">
              <span class="flex items-center gap-1">
                <i class="fa-solid fa-box text-indigo-600"></i>
                Qty: <strong class="text-gray-900">{{ item.quantity }}</strong>
              </span>
              <span class="w-px h-4 bg-gray-300"></span>
              <span class="flex items-center gap-1">
                <i class="fa-solid fa-tag text-indigo-600"></i>
                Price: <strong class="text-gray-900">₹{{ item.unit_price | number:'1.0-0' }}</strong>
              </span>
            </div>
          </div>

          <!-- Status & Action -->
          <div class="flex flex-col items-end gap-3">
            <span class="px-4 py-2 text-xs font-bold rounded-full shadow-sm ring-2"
              [ngClass]="{
                'bg-yellow-50 text-yellow-800 ring-yellow-300': item.status === 'PLACED',
                'bg-blue-50 text-blue-800 ring-blue-300': item.status === 'PROCESSING',
                'bg-purple-50 text-purple-800 ring-purple-300': item.status === 'SHIPPED',
                'bg-green-50 text-green-800 ring-green-300': item.status === 'DELIVERED'
              }">
              {{ item.status }}
            </span>

            <button *ngIf="getNextStatus(item.status)" 
              (click)="openStatusModal(item)"
              class="text-xs font-bold px-4 py-2 rounded-lg border-2 transition-all transform hover:scale-105 text-indigo-700 border-indigo-300 hover:bg-indigo-50 bg-white">
              → Update to <br>{{ getNextStatus(item.status) }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Status Update Modal -->
<div *ngIf="showStatusModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
  <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 transform transition-all">
    <div class="flex items-center space-x-3 mb-4">
      <div class="bg-indigo-100 p-3 rounded-lg">
        <i class="fa-solid fa-check-circle text-2xl text-indigo-600"></i>
      </div>
      <h3 class="text-2xl font-bold text-gray-900">Update Status</h3>
    </div>
    
    <p class="text-gray-600 mb-6">
      Mark order as <span class="font-bold bg-indigo-100 text-indigo-900 px-2 py-1 rounded">{{ newStatus }}</span>?
    </p>

    <div *ngIf="newStatus === 'SHIPPED'" class="mb-6">
      <label class="block text-sm font-bold text-gray-700 mb-2">
        <i class="fa-solid fa-box mr-1"></i>
        Tracking Number <span class="text-red-500">*</span>
      </label>
      <input 
        type="text" 
        [(ngModel)]="trackingNumber"
        placeholder="Enter tracking number"
        class="w-full px-4 py-3 border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
      >
      <p class="text-xs text-gray-500 mt-2">Required for shipping notifications.</p>
    </div>

    <div class="flex justify-end space-x-3 pt-4 border-t border-gray-200">
      <button (click)="closeStatusModal()" class="px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg font-medium transition-colors">Cancel</button>
      <button (click)="updateStatus()" class="px-6 py-2 bg-gradient-to-r from-indigo-600 to-blue-600 text-white rounded-lg hover:shadow-lg font-bold transition-all transform hover:scale-105">Confirm</button>
  </div>
</div>
