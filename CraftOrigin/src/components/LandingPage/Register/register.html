<div class="register-container">
  <!-- Header -->
  <div class="register-header">
    <h2 class="register-title">Create Account</h2>
    <p class="register-subtitle">Join CraftOrigin today</p>
  </div>

  <!-- Success Message -->
  <div *ngIf="successMessage" class="success-message">
    <span class="success-icon">âœ“</span>
    <span>{{ successMessage }}</span>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-message">
    <span class="error-icon">âš ï¸</span>
    <span>{{ errorMessage }}</span>
  </div>

  <!-- Registration Form -->
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
    
    <!-- Full Name Field -->
    <div class="form-group">
      <label for="name" class="form-label">Full Name</label>
      <input
        type="text"
        id="name"
        formControlName="name"
        class="form-input"
        [class.error]="name?.invalid && name?.touched"
        placeholder="Enter your full name"
        autocomplete="name"
      />
      <div *ngIf="name?.invalid && name?.touched" class="field-error">
        <span *ngIf="name?.errors?.['required']">Name is required</span>
        <span *ngIf="name?.errors?.['minlength']">Name must be at least 2 characters</span>
      </div>
    </div>

    <!-- Email Field -->
    <div class="form-group">
      <label for="register-email" class="form-label">Email Address</label>
      <input
        type="email"
        id="register-email"
        formControlName="email"
        class="form-input"
        [class.error]="email?.invalid && email?.touched"
        placeholder="Enter your email"
        autocomplete="email"
      />
      <div *ngIf="email?.invalid && email?.touched" class="field-error">
        <span *ngIf="email?.errors?.['required']">Email is required</span>
        <span *ngIf="email?.errors?.['email']">Please enter a valid email</span>
      </div>
    </div>

    <!-- Password Field -->
    <div class="form-group">
      <label for="register-password" class="form-label">Password</label>
      <div class="password-input-wrapper">
        <input
          [type]="showPassword ? 'text' : 'password'"
          id="register-password"
          formControlName="password"
          class="form-input"
          [class.error]="password?.invalid && password?.touched"
          placeholder="Create a password"
          autocomplete="new-password"
        />
        <button
          type="button"
          class="password-toggle"
          (click)="togglePasswordVisibility()"
          aria-label="Toggle password visibility"
        >
          {{ showPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
        </button>
      </div>
      <div *ngIf="password?.invalid && password?.touched" class="field-error">
        <span *ngIf="password?.errors?.['required']">Password is required</span>
        <span *ngIf="password?.errors?.['minlength']">Password must be at least 6 characters</span>
        <span *ngIf="password?.errors?.['passwordStrength']">Password must contain uppercase, lowercase, and number</span>
      </div>
      
      <!-- Password Strength Indicator -->
      <div class="password-strength" *ngIf="password?.value">
        <div class="strength-bars">
          <div class="strength-bar" 
               [class.weak]="password?.value.length >= 1"
               [class.medium]="password?.value.length >= 6"
               [class.strong]="password?.value.length >= 8 && !password?.errors?.['passwordStrength']">
          </div>
          <div class="strength-bar" 
               [class.medium]="password?.value.length >= 6"
               [class.strong]="password?.value.length >= 8 && !password?.errors?.['passwordStrength']">
          </div>
          <div class="strength-bar" 
               [class.strong]="password?.value.length >= 8 && !password?.errors?.['passwordStrength']">
          </div>
        </div>
        <span class="strength-text">
          <span *ngIf="password?.value.length < 6">Weak</span>
          <span *ngIf="password?.value.length >= 6 && password?.errors?.['passwordStrength']">Medium</span>
          <span *ngIf="password?.value.length >= 8 && !password?.errors?.['passwordStrength']">Strong</span>
        </span>
      </div>
    </div>

    <!-- Confirm Password Field -->
    <div class="form-group">
      <label for="confirm-password" class="form-label">Confirm Password</label>
      <div class="password-input-wrapper">
        <input
          [type]="showConfirmPassword ? 'text' : 'password'"
          id="confirm-password"
          formControlName="confirmPassword"
          class="form-input"
          [class.error]="(confirmPassword?.invalid && confirmPassword?.touched) || (registerForm.errors?.['passwordMismatch'] && confirmPassword?.touched)"
          placeholder="Confirm your password"
          autocomplete="new-password"
        />
        <button
          type="button"
          class="password-toggle"
          (click)="toggleConfirmPasswordVisibility()"
          aria-label="Toggle confirm password visibility"
        >
          {{ showConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
        </button>
      </div>
      <div *ngIf="confirmPassword?.touched" class="field-error">
        <span *ngIf="confirmPassword?.errors?.['required']">Please confirm your password</span>
        <span *ngIf="registerForm.errors?.['passwordMismatch'] && !confirmPassword?.errors?.['required']">Passwords do not match</span>
      </div>
    </div>

    <!-- Terms and Conditions -->
    <div class="terms-notice">
      <p>By signing up, you agree to our <a href="#" class="link">Terms of Service</a> and <a href="#" class="link">Privacy Policy</a></p>
    </div>

    <!-- Submit Button -->
    <div style="display: flex; justify-content: center; margin-top: 1.2rem;">
      <button
        type="submit"
        class="login-button gradient-btn"
        [disabled]="isLoading || registerForm.invalid"
        style="width: 100%; max-width: 320px; font-size: 1.08rem; letter-spacing: 0.01em;"
      >
        <span *ngIf="!isLoading">Sign Up</span>
        <span *ngIf="isLoading" class="loading-spinner">
          <span class="spinner"></span>
          Signing up...
        </span>
      </button>
    </div>
  </form>
  <div class="register-link" style="text-align: center; margin-top: 1.5rem;">
    <p style="font-size: 0.97rem; color: #718096;">Already have an account? <a href="#" class="link">Sign In</a></p>
  </div>
</div>